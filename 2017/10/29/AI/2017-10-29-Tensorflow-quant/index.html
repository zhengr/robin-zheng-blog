<!DOCTYPE html><html class="appearance-auto" lang="zh-CN"><head><meta charset="UTF-8"><title>实战人工智能（TensorFlow）在证券量化交易中的突破</title><meta name="description" content="观天之道，执天之行"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="/style/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/highlight-theme-light.css"><script src="/jslib/highlight.pack.js"></script><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="Robin's blog" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column"><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-space-between is-hidden-mobile"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">Robin's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">实战人工智能（TensorFlow）在证券量化交易中的突破</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">点击返回顶部</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">首页</a></h3><h3 class="is-inline-block"><a href="/about">关于</a></h3><h3 class="is-inline-block"><a href="/archives">归档</a></h3></aside></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">首页</a></h3><h3 class="is-inline-block"><a href="/about">关于</a></h3><h3 class="is-inline-block"><a href="/archives">归档</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%AF%E8%A7%86%E5%8C%96%E7%AD%96%E7%95%A5%E8%AE%BE%E8%AE%A1"><span class="toc-text">可视化策略设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E5%9F%BA%E4%BA%8E%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93%E7%AD%96%E7%95%A5"><span class="toc-text">执行基于深度学习的量化交易策略</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9E%E6%B5%8B%E7%BB%93%E6%9E%9C%E6%95%B0%E6%8D%AE"><span class="toc-text">回测结果数据</span></a></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93"><i class="tag post-item-tag">量化交易</i></a><a href="/tags/tensorflow"><i class="tag post-item-tag">tensorflow</i></a><a href="/tags/Quant"><i class="tag post-item-tag">Quant</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">实战人工智能（TensorFlow）在证券量化交易中的突破</h1><time class="has-text-grey" datetime="2017-10-29T00:00:00.000Z">2017-10-29</time><article class="mt-2 post-content"><p>近年来各类量化交易平台层出不穷， 多数是基于类似（anaconda + 证券数据）这样的数据建模+分析平台， 通过Python的强大数据处理能力来构建量化交易策略。近期测用了一个借助Tensorflow深度学习技术的量化工具，将人工智能概念与量化交易融合，回测结果非常惊人，远超沪深300。</p>
<h2 id="可视化策略设计"><a href="#可视化策略设计" class="headerlink" title="可视化策略设计"></a>可视化策略设计</h2><p><img src="https://raw.githubusercontent.com/zhengr/zhengr.github.io/master/assets/images/20171029Capture2.PNG" alt="20171029Capture2"></p>
<h2 id="执行基于深度学习的量化交易策略"><a href="#执行基于深度学习的量化交易策略" class="headerlink" title="执行基于深度学习的量化交易策略"></a>执行基于深度学习的量化交易策略</h2><pre><code class="verilog">[2017-10-30 04:23:51.860846] INFO: quant: instruments.v2 开始运行..
[2017-10-30 04:23:51.900663] INFO: quant: instruments.v2 运行完成[0.039842s].
[2017-10-30 04:23:51.984478] INFO: quant: advanced_auto_labeler.v2 开始运行..
[2017-10-30 04:24:05.050702] INFO: 自动数据标注: 加载历史数据: 4451670 行
[2017-10-30 04:24:05.051990] INFO: 自动数据标注: 开始标注 ..
[2017-10-30 04:24:31.427443] INFO: quant: advanced_auto_labeler.v2 运行完成[39.442966s].
[2017-10-30 04:24:31.436329] INFO: quant: input_features.v1 开始运行..
[2017-10-30 04:24:31.445372] INFO: quant: 命中缓存
[2017-10-30 04:24:31.446037] INFO: quant: input_features.v1 运行完成[0.009731s].
[2017-10-30 04:24:31.470692] INFO: quant: general_feature_extractor.v6 开始运行..
[2017-10-30 04:24:43.465794] INFO: 基础特征抽取: 年份 2010, 特征行数=431567
[2017-10-30 04:24:57.637034] INFO: 基础特征抽取: 年份 2011, 特征行数=511455
[2017-10-30 04:25:13.418651] INFO: 基础特征抽取: 年份 2012, 特征行数=565675
[2017-10-30 04:25:28.853081] INFO: 基础特征抽取: 年份 2013, 特征行数=564168
[2017-10-30 04:25:45.124617] INFO: 基础特征抽取: 年份 2014, 特征行数=569948
[2017-10-30 04:25:59.190550] INFO: 基础特征抽取: 年份 2015, 特征行数=569698
[2017-10-30 04:26:15.774595] INFO: 基础特征抽取: 年份 2016, 特征行数=641546
[2017-10-30 04:26:30.497031] INFO: 基础特征抽取: 年份 2017, 特征行数=597613
[2017-10-30 04:26:30.527335] INFO: 基础特征抽取: 总行数: 4451670
[2017-10-30 04:26:30.537181] INFO: quant: general_feature_extractor.v6 运行完成[119.066492s].
[2017-10-30 04:26:30.547465] INFO: quant: derived_feature_extractor.v2 开始运行..
[2017-10-30 04:26:34.316964] INFO: derived_feature_extractor: 提取完成 avg_amount_0/avg_amount_5, 0.009s
[2017-10-30 04:26:34.329348] INFO: derived_feature_extractor: 提取完成 avg_amount_5/avg_amount_20, 0.011s
[2017-10-30 04:26:34.341731] INFO: derived_feature_extractor: 提取完成 rank_avg_amount_0/rank_avg_amount_5, 0.011s
[2017-10-30 04:26:34.352090] INFO: derived_feature_extractor: 提取完成 rank_avg_amount_5/rank_avg_amount_10, 0.009s
[2017-10-30 04:26:34.361827] INFO: derived_feature_extractor: 提取完成 rank_return_0/rank_return_5, 0.008s
[2017-10-30 04:26:34.371729] INFO: derived_feature_extractor: 提取完成 rank_return_5/rank_return_10, 0.009s
[2017-10-30 04:26:39.481508] INFO: derived_feature_extractor: /y_2010, 431567
[2017-10-30 04:26:39.912103] INFO: derived_feature_extractor: /y_2011, 511455
[2017-10-30 04:26:40.795991] INFO: derived_feature_extractor: /y_2012, 565675
[2017-10-30 04:26:41.290907] INFO: derived_feature_extractor: /y_2013, 564168
[2017-10-30 04:26:41.778812] INFO: derived_feature_extractor: /y_2014, 569948
[2017-10-30 04:26:42.304537] INFO: derived_feature_extractor: /y_2015, 569698
[2017-10-30 04:26:43.185396] INFO: derived_feature_extractor: /y_2016, 641546
[2017-10-30 04:26:43.997410] INFO: derived_feature_extractor: /y_2017, 597613
[2017-10-30 04:26:44.741970] INFO: quant: derived_feature_extractor.v2 运行完成[14.194475s].
[2017-10-30 04:26:44.753794] INFO: quant: join.v3 开始运行..
[2017-10-30 04:27:01.503429] INFO: join: /y_2010, 行数=431030/431567, 耗时=13.222894s
[2017-10-30 04:27:26.105056] INFO: join: /y_2011, 行数=510922/511455, 耗时=24.586824s
[2017-10-30 04:27:59.728027] INFO: join: /y_2012, 行数=564582/565675, 耗时=33.589178s
[2017-10-30 04:28:26.234889] INFO: join: /y_2013, 行数=563137/564168, 耗时=26.479275s
[2017-10-30 04:28:58.825867] INFO: join: /y_2014, 行数=567874/569948, 耗时=32.568128s
[2017-10-30 04:29:27.996655] INFO: join: /y_2015, 行数=560424/569698, 耗时=29.145789s
[2017-10-30 04:29:58.872081] INFO: join: /y_2016, 行数=637424/641546, 耗时=30.851773s
[2017-10-30 04:30:30.941011] INFO: join: /y_2017, 行数=576562/597613, 耗时=32.041855s
[2017-10-30 04:30:31.102396] INFO: join: 最终行数: 4411955
[2017-10-30 04:30:31.104637] INFO: quant: join.v3 运行完成[226.350825s].
[2017-10-30 04:30:31.119058] INFO: quant: dropnan.v1 开始运行..
[2017-10-30 04:30:31.776377] INFO: dropnan: /y_2010, 423741/431030
[2017-10-30 04:30:33.517425] INFO: dropnan: /y_2011, 504726/510922
[2017-10-30 04:30:34.449474] INFO: dropnan: /y_2012, 561109/564582
[2017-10-30 04:30:35.291505] INFO: dropnan: /y_2013, 563107/563137
[2017-10-30 04:30:37.202618] INFO: dropnan: /y_2014, 566035/567874
[2017-10-30 04:30:39.190745] INFO: dropnan: /y_2015, 558148/560424
[2017-10-30 04:30:42.708962] INFO: dropnan: /y_2016, 635564/637424
[2017-10-30 04:30:43.383097] INFO: dropnan: /y_2017, 571976/576562
[2017-10-30 04:30:43.415940] INFO: dropnan: 行数: 4384406/4411955
[2017-10-30 04:30:43.436363] INFO: quant: dropnan.v1 运行完成[12.317303s].
[2017-10-30 04:30:43.593560] INFO: quant: stock_ranker_train.v5 开始运行..
[2017-10-30 04:31:31.995534] INFO: df2bin: prepare bins ..
[2017-10-30 04:31:38.116864] INFO: df2bin: prepare data: training ..
[2017-10-30 04:32:22.274530] INFO: df2bin: sort ..
[2017-10-30 04:34:25.088080] INFO: stock_ranker_train: 09817828 准备训练: 4384406 行数
[2017-10-30 04:37:28.953616] INFO: quant: stock_ranker_train.v5 运行完成[405.360067s].
[2017-10-30 04:37:28.960640] INFO: quant: instruments.v2 开始运行..
[2017-10-30 04:37:28.963965] INFO: quant: 命中缓存
[2017-10-30 04:37:28.965369] INFO: quant: instruments.v2 运行完成[0.004703s].
[2017-10-30 04:37:28.983046] INFO: quant: general_feature_extractor.v6 开始运行..
[2017-10-30 04:37:28.987251] INFO: quant: 命中缓存
[2017-10-30 04:37:28.988026] INFO: quant: general_feature_extractor.v6 运行完成[0.00499s].
[2017-10-30 04:37:28.993648] INFO: quant: derived_feature_extractor.v2 开始运行..
[2017-10-30 04:37:28.996227] INFO: quant: 命中缓存
[2017-10-30 04:37:28.997090] INFO: quant: derived_feature_extractor.v2 运行完成[0.00344s].
[2017-10-30 04:37:29.002208] INFO: quant: dropnan.v1 开始运行..
[2017-10-30 04:37:29.007026] INFO: quant: 命中缓存
[2017-10-30 04:37:29.008029] INFO: quant: dropnan.v1 运行完成[0.005807s].
[2017-10-30 04:37:29.024938] INFO: quant: stock_ranker_predict.v5 开始运行..
[2017-10-30 04:37:32.514483] INFO: df2bin: prepare data: prediction ..
[2017-10-30 04:38:02.464189] INFO: stock_ranker_predict: 准备预测: 1202058 行
[2017-10-30 04:38:15.803604] INFO: quant: stock_ranker_predict.v5 运行完成[46.778661s].
[2017-10-30 04:38:15.864959] INFO: quant: backtest.v7 开始运行..
[2017-10-30 04:39:11.183389] INFO: Performance: Simulated 488 trading days out of 488.
[2017-10-30 04:39:11.184538] INFO: Performance: first open: 2015-01-05 14:30:00+00:00
[2017-10-30 04:39:11.185306] INFO: Performance: last close: 2016-12-30 20:00:00+00:00
[2017-10-30 04:39:13.489930] INFO: bigquant: backtest.v7 运行完成[57.624996s].</code></pre>
<h2 id="回测结果数据"><a href="#回测结果数据" class="headerlink" title="回测结果数据"></a>回测结果数据</h2><p><img src="https://raw.githubusercontent.com/zhengr/zhengr.github.io/master/assets/images/20171029Capture1.PNG" alt="20171029Capture1"></p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2017/12/20/%E4%B8%BB%E9%A2%98/Typography%20and%20tags/" title="Typography and tags"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">上一页: Typography and tags</span></a><a class="button is-default" href="/2017/10/29/AI/2018-01-01-KNIME-How-to-Connect-Database/" title="KNIME 连接主流数据库方法"><span class="has-text-weight-semibold">下一页: KNIME 连接主流数据库方法</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="zhengr/robin-zheng-blog" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><a title="twitter" target="_blank" rel="noopener nofollow" href="//twitter.com//"><i class="iconfont icon-twitter"></i></a><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/zhengr"><i class="iconfont icon-github"></i></a><!-- Ins--><a title="instagram" target="_blank" rel="noopener nofollow" href="//www.instagram.com//"><i class="iconfont icon-ins"></i></a><!-- RSS--><a title="rss" target="_blank" rel="noopener nofollow" href="/atom.xml"><i class="iconfont icon-rss"></i></a><!-- 知乎--><!-- 领英--><!-- 脸书--><a title="facebook" target="_blank" rel="noopener nofollow" href="//www.facebook.com//"><i class="iconfont icon-tian7_facebook"></i></a></section><p><span>Copyright ©</span><span> Robin 2021</span></p></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script></body></html>